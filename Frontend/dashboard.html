<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Food Analyzer â€“ Dashboard</title>

    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="dashboard.css">
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sideMenu">
    <button class="close-btn" onclick="closeMenu()">âœ• Close</button>

    <a href="home.html">ğŸ  Home</a>
    <a href="index1.html">ğŸ¥— Analyzer</a>
    <a href="dashboard.html">ğŸ“Š Dashboard</a>
    <a href="fitness.html">ğŸƒFitness</a>
    <a href="history.html">ğŸ§¾ History</a>
    <a href="profile.html">ğŸ‘¤ Profile</a>
    <a href="settings.html">âš™ Settings</a>
    <a href="ai-assistant.html" class="active">ğŸ¤– AI Assistant</a>
</div>

<!-- HEADER -->
<div class="header-card">
    <button class="menu-btn" onclick="openMenu()">â˜°</button>
    <div class="brand">Dashboard</div>
</div>

<!-- MAIN -->
<div class="dashboard-container">

    <!-- TOP METRIC CARDS -->
    <div class="metrics-row">

        <div class="metric-card">
            <h3>ğŸ”¥ Calories Today</h3>
            <p class="metric-value">1450 / 2200 kcal</p>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 65%"></div>
            </div>
        </div>

        <div class="metric-card">
            <h3>ğŸ— Protein</h3>
            <p class="metric-value">78g</p>
            <div class="progress-bar">
                <div class="progress-fill protein"></div>
            </div>
        </div>

        <div class="metric-card">
            <h3>ğŸ¥– Carbs</h3>
            <p class="metric-value">168g</p>
            <div class="progress-bar">
                <div class="progress-fill carbs"></div>
            </div>
        </div>

        <div class="metric-card">
            <h3>ğŸ¥‘ Fats</h3>
            <p class="metric-value">52g</p>
            <div class="progress-bar">
                <div class="progress-fill fats"></div>
            </div>
        </div>

    </div>

    <!-- CHART + INSIGHTS -->
    <div class="grid-two">

        <div class="chart-card">
            <h2>ğŸ“† Weekly Nutrition Overview</h2>
            <img src="https://quickchart.io/chart?c={
                type:'bar',
                data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
                datasets:[{label:'Calories',data:[1800,2200,2000,2100,1900,2500,2300]}]}
            }" class="chart-img">
        </div>

        <div class="insight-card">
            <h2>ğŸ§  AI Insights</h2>

            <div class="insight-item">â€¢ You're closest to hitting your protein goal âœ”ï¸</div>
            <div class="insight-item">â€¢ Consider reducing carbs in dinner ğŸŒ™</div>
            <div class="insight-item">â€¢ Hydration below ideal â€” drink 2 more cups ğŸ’§</div>
            <div class="insight-item">â€¢ Great consistency this week! â­</div>

        </div>

    </div>

    <!-- MEAL LOG + HYDRATION -->
    <div class="grid-two">

        <div class="meal-card">
            <h2>ğŸ½ Recent Meals</h2>

            <div class="meal-item">
                <span>ğŸ¥— Salad Bowl</span>
                <span>350 kcal</span>
            </div>

            <div class="meal-item">
                <span>ğŸ Pasta</span>
                <span>620 kcal</span>
            </div>

            <div class="meal-item">
                <span>ğŸ³ Omelette</span>
                <span>290 kcal</span>
            </div>

            <div class="meal-item">
                <span>ğŸŒ Banana</span>
                <span>90 kcal</span>
            </div>

        </div>

        <div class="hydration-card">
            <h2>ğŸ’§ Hydration Tracker</h2>
            <p class="water-count">4 / 8 glasses</p>

            <div class="water-bar">
                <div class="water-fill" style="height: 50%"></div>
            </div>
        </div>

    </div>

</div>

<script>
function openMenu() {
    document.getElementById("sideMenu").classList.add("active");
}
function closeMenu() {
    document.getElementById("sideMenu").classList.remove("active");
}
</script>
<div class="chat-float-btn" onclick="toggleChat()">
    ğŸ’¬
</div>

<!-- AI CHAT PANEL -->
<div class="chat-panel" id="chatPanel">

    <div class="chat-header">
        <span>ğŸ¤– Smart AI Assistant</span>
        <button class="chat-close" onclick="toggleChat()">âœ•</button>
    </div>

    <div class="chat-body" id="chatBody">
        <!-- AI messages will appear here -->
    </div>

    <div class="chat-input-area">
        <input id="chatInput" type="text" placeholder="Ask anything...">
        <button onclick="sendChat()" class="chat-send">â¤</button>
    </div>

</div>
<script>
function toggleChat() {
    document.getElementById("chatPanel").classList.toggle("active");
}

async function sendChat() {

    let input = document.getElementById("chatInput");
    let msg = input.value.trim();
    if (msg === "") return;

    addMessage(msg, "user");
    input.value = "";

    addMessage("ğŸ¤– Thinking...", "ai");

    try {

        const response = await fetch(
            "https://openrouter.ai/api/v1/chat/completions",
            {
                method: "POST",
                headers: {
                    "Authorization": "Bearer YOUR_API_KEY",
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    model: "mistralai/mistral-7b-instruct",
                    messages: [
                        {
                            role: "system",
                            content: "You are a smart AI nutrition coach helping users improve diet and fitness."
                        },
                        {
                            role: "user",
                            content: msg
                        }
                    ]
                })
            }
        );

        const data = await response.json();

        document.getElementById("chatBody")
            .lastChild.remove();

        addMessage(
            data.choices[0].message.content,
            "ai"
        );

        scrollToBottom();

    } catch {

        document.getElementById("chatBody")
            .lastChild.remove();

        addMessage(
            "âŒ AI server error.",
            "ai"
        );
    }
}


function addMessage(text, type) {
    let body = document.getElementById("chatBody");
    let div = document.createElement("div");

    div.className = "chat-msg chat-" + type;
    div.innerText = text;

    body.appendChild(div);
}

function scrollToBottom() {
    let body = document.getElementById("chatBody");
    body.scrollTop = body.scrollHeight;
}
</script>
<script>
    // Load theme on page load
    document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");

        if (savedTheme === "dark") {
            document.body.classList.add("dark-mode");
        }
    });
</script>
</body>
</html>